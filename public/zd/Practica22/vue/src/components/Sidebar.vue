<template>
  <nav :class="[styles.sidebar, isCollapsed ? styles.collapsed : '']">
    <div :class="styles.desktopHeader">
      <div v-if="!isCollapsed" :class="styles.logo">–ú–æ—è –º–µ–¥–∏–∞—Ç–µ–∫–∞</div>
      <div v-else :class="styles.logoIcon">üéµ</div>
    </div>

    <div :class="styles.navItems">
      <RouterLink to="/" :class="styles.navItem" active-class="active">
        <span :class="styles.icon">üè†</span>
        <span v-if="!isCollapsed" :class="styles.label">–ì–ª–∞–≤–Ω–∞—è</span>
      </RouterLink>

      <RouterLink to="/search" :class="styles.navItem" active-class="active">
        <span :class="styles.icon">üîç</span>
        <span v-if="!isCollapsed" :class="styles.label">–ü–æ–∏—Å–∫</span>
      </RouterLink>

      <RouterLink to="/liked-songs" :class="styles.navItem" active-class="active">
        <span :class="styles.icon">üìö</span>
        <span v-if="!isCollapsed" :class="styles.label">–ú–æ—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</span>
      </RouterLink>

      <div :class="styles.divider"></div>

      <button :class="styles.createPlaylist">
        <span :class="styles.plus">‚ûï</span> 
        <span v-if="!isCollapsed">–°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç</span>
      </button>

      <RouterLink to="/liked-songs" :class="styles.likedSongsLink">
        <span :class="styles.heart">‚ù§Ô∏è</span> 
        <span v-if="!isCollapsed">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
      </RouterLink>

      <div v-if="!isCollapsed" :class="styles.scrollableList">
        <a href="#" :class="styles.listItem">–í–∞—à–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã</a>
        <a href="#" :class="styles.listItem">–õ—é–±–∏–º—ã–µ —Ç—Ä–µ–∫–∏</a>
        <a href="#" :class="styles.listItem">–ú–æ–∏ –≤—ã–ø—É—Å–∫–∏</a>
        <a href="#" :class="styles.listItem">Welcome to ado</a>
        <a href="#" :class="styles.listItem">MAGIC</a>
        <a href="#" :class="styles.listItem">–ú–æ–π –ø–ª–µ–π–ª–∏—Å—Ç ‚Ññ11</a>
      </div>
    </div>

    <!-- Drag Handle -->
    <div :class="styles.resizer" @mousedown="startResize"></div>

    <!-- Mobile Navigation -->
    <div :class="styles.mobileNav">
      <RouterLink to="/" :class="styles.mobileItem" active-class="active">
        <span :class="styles.icon">üè†</span>
        <span :class="styles.mobileLabel">–ì–ª–∞–≤–Ω–∞—è</span>
      </RouterLink>

      <RouterLink to="/search" :class="styles.mobileItem" active-class="active">
        <span :class="styles.icon">üîç</span>
        <span :class="styles.mobileLabel">–ü–æ–∏—Å–∫</span>
      </RouterLink>

      <RouterLink to="/liked-songs" :class="styles.mobileItem" active-class="active">
        <span :class="styles.icon">üìö</span>
        <span :class="styles.mobileLabel">–ú–µ–¥–∏–∞—Ç–µ–∫–∞</span>
      </RouterLink>
      
      <div :class="styles.mobileItem" @click="showMore = !showMore">
        <span :class="styles.icon">‚ò∞</span>
        <span :class="styles.mobileLabel">–ï—â–µ</span>
      </div>

       <div v-if="showMore" :class="styles.moreMenu">
          <button :class="styles.moreBtn">Placeholder 1</button>
          <button :class="styles.moreBtn">Placeholder 2</button>
          <button :class="styles.moreBtn">Placeholder 3</button>
          <button :class="styles.moreBtn">Placeholder 4</button>
       </div>
    </div>
  </nav>
</template>

<script>
import styles from './Sidebar.module.css';

export default {
  name: 'Sidebar',
  props: {
    width: {
      type: Number,
      default: 250
    }
  },
  data() {
    return {
      styles,
      showMore: false
    }
  },
  computed: {
    isCollapsed() {
      // Collapse if width is less than threshold (e.g. 150px)
      return this.width < 180;
    }
  },
  methods: {
    startResize(event) {
      // Prevent text selection during drag
      event.preventDefault(); 
      this.$emit('resize-start', event);
    }
  }
}
</script>
